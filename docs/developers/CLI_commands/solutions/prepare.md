---
id: "solutions-prepare"
title: "solutions prepare"
slug: "/cli_commands/solutions/prepare"
sidebar_label: "prepare"
---

Pack a solution, sign it with [Gramine](https://gramineproject.io/), and write a [manifest](https://gramine.readthedocs.io/en/stable/manifest-syntax.html).

This allows the execution of the "graminized" solution code inside a confidential enclave (Trusted Execution Environment). When the solution is prepared and packed, you can [upload](/developers/cli_commands/files/upload) the resulting archive to a distributed storage to use the solution in orders.

## Synopsis

```
./spctl solutions prepare <solutionPath> <signingKeyPath> --base-image-path <baseImagePath> [option ...]
```

**Input**

- Directory with the solution and all its dependencies
- Signing key file generated by the [solutions generate-key](/developers/cli_commands/solutions/generate-key) command
- Node.js or Python base image downloaded from their respective offers using the [offers download-content](/developers/cli_commands/offers/offers/download-content) command:
  + Python Base Image: `./spctl offers download-content 5`
  + Node.js Base Image: `./spctl offers download-content 6`

**Output**

- TAR.GZ archive with graminized solution and dependencies. The base image is graminized but not included in the archive and must be added to the order separately
- JSON file with essential metadata

## Mandatory arguments

|**Name**         |**Description**               |
|:----------------|:-----------------------------|
|`solutionPath`   |Path to the solution directory|
|`solutionKeyPath`|Path to the key file          |
|`baseImagePath`  |Path to the base image file   |

## Options

|**Name**                        |**Description**                                                  |
|:------------------------------------------|:----------------------------------------------------------------|
|`--metadata`                  |Path to save the resulting metadata file (hash and MrEnclave). The default is `./metadata.json` |
|`--pack-solution`           |Path to save the resulting TAR.GZ archive                        |
|`--write-default-manifest`  |Write a default manifest for solutions with empty MrEnclave. The default is `false`  |
|`--env`                      |List of environment variables to set into solution manifest      |
|`--hash-algo`               |Hash calculation algorithm for the solution. The default is `sha256`     |
|`--sgx-max-threads`           |Number of maximum threads, a Gramine 1.4 option                  |
|`--sgx-enclave-size`         |Entire enclave size (#M or #G), must be a value to the power of 2|
|`--sgx-loader-internal-size`|Size of the internal enclave structs (#M or #G)                  |
|`--sgx-stack-size`         |Size of the enclave thread stack (#K, #M or #G)                  |
|`--config`                    |Path to the configuration file. The default is `./config.json`   |
|`--help`, `-h`                |Display help for the command                                     |

## Example

The following command prepares a solution:

```
./spctl solutions prepare ./my-solution/run ./my-solution/signing-key --base-image-path ./base-solution-image.tar.gz 
```

Arguments and options used:

- `./my-solution/run`: solution directory
- `./my-solution/signing-key`: path to the signing key
- `--base-image-path ./base-solution-image.tar.gz`: path to the base image file `base-solution-image.tar.gz`