---
id: "tee"
title: "TEE"
slug: "/fundamentals/tee"
sidebar_position: 1
---


## Understanding TEE

**что делает граминизация?**

подготовка манифеста. Обычную память можно прочитать, а анклав нет. SGX дает инструкции процессору для защиты, процессорное АПИ, на ассемблере. Грамин это те же инструкции, но в более простом языке. Грамину нужен манифест. В манифесте мы указываем какие файлы попадают в защищенную область. Какие нужны для работы программы. Манифест запуска программы и файлов которые ей нужны.

Задача solutions prepare подготовить эти файлы (путь как папке) + все зависимости. Это находится в solution/run.

Отдельно бинарник самой ноды - базовый образ. Но зачем нужен файл при упаковке? Потому что децентрализация. Можно было бы и подтягивать из цетрального, но это неправильно. Базовый образ не пакуется со скриптом ноды. Почему мы не можем скачать оффер базового образа в процессе создания worlfows create - чтобы не грузить руками большой файл базового образа каждый раз в files upload. Оптимизация использования хранилища и загрузки.

Когда просчитывается манифест то просчитывается хеш, MRENCLAVE, скрипт + базовый образ - MRENCLAVE всей упаковки. Это гарантия что в память попали именно те файлы которые были граминизированы. Files upload всегда шифриует при загрузке, сторедж провайдер не имеет доступа. MRENCLAVE есть у манифеста.

КЛюч нужен для еще одной степени защиты на случай взлома хешей. MRSIGNER - это хеш ключа которым была произведена подпись.

MRENCLAVE и MRSIGNER это два отдельных параллельных уровня защиты.

На выходе мы получаем архив который нужно загрузить. В архиве манифест папки mysolution/run + манифест базового образа.

Также metadata.json - MRENCLAVE + хеш архива, который нужен для проверки целостности архива. Его можно потом добавить в ресурсный файл при загрузке. Можно использовать для дополнительной проверки. Это не обязательная опция при загрузке.

INPUT - решение лежит в открытом виде, dist или entrypoint.




https://www.ibm.com/topics/confidential-computing

