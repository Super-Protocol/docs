---
id: "tunnel_client"
title: "Tunnel Client"
slug: "/tunnel_client"
sidebar_position: 1
---

Для создания туннелей необходимо два компонента - Туннель Клиент и Туннель Сервер. Сначала создается Туннель Сервер, при этом ему передается уникальный текстовый токен для дальнейшего подключения Туннель Клиента.

На вход туннель клиенту подаются данные, в которых в корне должен быть файл config.json в следующем формате:


```
{
"tunnels": [
{
"sgxMrSigner": "TUNNEL_SERVER_MRSIGNER",
"sgxMrEnclave": "TUNNEL_SERVER_MRENCLAVE"
}
],
"authToken": "AUTH_TOKEN",
"site": {
"cert": "./website-fullchain.crt",
"key": "./website-private-key.pem"
}
}
```
А также должна быть папка content с содержимым.

Туннель Клиент - это второй компонент, который совершает следующие действия:

1. Разворачивает локальный HTTPS сервер туннелируемого решения. Для этого решение должно предоставлять файл server.js в одной из папок входных данных:


```
/content, /content/dist, /content/build
```
и принимать следующие переменные окружения:

* HTTPS_PORT. Порт, на котором нужно развернуть локальный HTTPS сервер, к которому будет установлено туннелируемое подключение.

* TLS_CERT. Сертификат HTTPS сервера.

* TLS_KEY. Приватный ключ HTTPS сервера.

2. Считывает сертификат домена и токен для подключения к серверу из файла конфигурации config.json.

3. Присоединяется к Туннель Серверу и передает ему токен и сертификат домена с приватным ключом для регистрации и обработки входных подключений

4. После успешной регистрации Туннель Клиент пробрасывает трафик к развернутому локальному серверу от туннель сервера и возвращает обратно ответы.